#Report programmeer project
##Jacob Jasper
##10650385

###Short description
My projects shows the user information about how many people smoke all over the
world in comparison with The Netherlands. Also, it shows the negative effects of
deaths caused by smoking and how much it contributes to cancer.

![](doc/report.jpeg)

###Technical design
- Index.html: The html file loads all files which are necessary to produce the
visualisations, libraries and stylesheets. The libraries of JQUERY, bootstrap,
ajax, topojson, datamap and d3 version 3 are first loaded. This is because you
need those files to create the design of the website and the use of syntax
(which is used in the files beneath). The make_map.js is loaded before the d3
version 4, because this one uses the d3 version 3. To make sure its clear this
file uses d3 version 3, I loaded before the version 4 library. After this the
version 4 of d3 is loaded, because all the files beneath this uses this version.
At the end the stylesheet is loaded for all the visualisations and html, because
these elements have been uploaded before or else it won't see the created classes. I have chosen to use containers for each element of my project and surround it by a border, so it is clear which elements belong together. Also with the containers it is easy to use columns with certain ids and assign each element to a id. Like this you have a good feeling for the layout en scales in the project.
- code/python: I have converted all my data into JSON files, because this is what we learned to do with the subject dataprocessing. For the data of the scatterplot I had to combine three different kind off files, which was hard because not all the data agreed with each other in number of countries and number of years.
- World heatmap: The heatmap is loaded from datamaps with a library. I only had to load my data into it and understand how de code worked. I had to edit my data into the right format first for using the library. Then I had to choose a color range which was good visible. I have chosen for the projection of 'mercator' because my projection was too small with the normal projection and this one was much clearer and bigger.My datamap is linked to two features, to a slider and to the linegraph. The slider is added to the map_container,which is the umbrella container of the map elements. In this container there are different kind of containers for placing the map and legend because these are different kind of elements. You want the slider underneath over the whole with, thats why you add it like that. The slider has a value which is adjusted of sliding it with the mouse. This value decides which year is displayed in the map on the basis of colors. The value is also input into the datamaps function and has an automatic update function to update the colors. The user also can hoover over the countries to display the values of the selected year of the hoovering country. With clicking on a country the function standing in the update_line.js will be called. It depends or the user already clicked once because there is a variable 'click' which stands on 0 if the user did not click once, so there will me made a new line to the linegraph. The function which will be called if the variable 'click = 0' is make_click_line, if the variable is 1, than the function update_click_line will be called. These two functions are standing in the file update_line.js. The legend displays the color gradient with values, so the user can see what colors belong to what values. I have placed it next to the map because it was unclear if it where above the slider. I have used d3v4 for the color gradient, because examples of this where easier to find and much clearer. The color legend is made in the file legend_map.js and will open a file with data about the share of smokers. By opening the website the data is opened and the legend is made. The technical components which where used are the d3 v3 datamaps, d3 v3, bootstrap, d3 v4, d3 tooltip.
- Scatterplot: The scatter is placed in his own container in his own column of 6. I used my scatter basis of dataprocessing for this visualisation. I first create a standard scatter with the number of cigarets smoked every day on the x axis and the number of deaths on the y axis of the year 1990. Thise is made in the file make_scatter.js, which opens the data and then makes the scatter plot. I used d3 tooltip and d3v4 for this. I also declared general variables to use in update_scatter.js and update_y_scatter.js. The current_variable is the most important, which indicates which variable has to be selected. The scatter is quite basic and if hoovering over the tooltip is shown. within the container there are two buttons, one for adjusting the year and one for adjusting the variable on the y axis. The user can choose which they would like to see. For adjusting the year of the scatter the function update_scatter in the file update_scatter.js is called. For changing the variable the function update_y_scatter in the file update_y_scatter.js is called. This function depends on the current_variable, because it will see what to update in what way. The datapoints in the scatter are countries. With clicking on a country the function standing in the update_line.js will be called. It depends or the user already clicked once because there is a variable 'click' which stands on 0 if the user did not click once, so there will me made a new line to the linegraph. The function which will be called if the variable 'click = 0' is make_click_line, if the variable is 1, than the function update_click_line will be called. These two functions are standing in the file update_line.js. The technical components used here are d3v4, bootstrap, d3 tooltip.
- Linegraph: The linegraph has also his own container, but this container is as wide as 12 columns (which is the maximum). The linegraph is created in the file make_linegraph.js which opens a file with data and makes the linegraph with bulletpoints which displays the datapoints. Hoovering over these bullet points will show a tooltip with information about the data. There will be added a line if the user clicks on a country in de worldmap of scatterplot. With clicking on a country the function standing in the update_line.js will be called. It depends or the user already clicked once because there is a variable 'click' which stands on 0 if the user did not click once, so there will me made a new line to the linegraph. The function which will be called if the variable 'click = 0' is make_click_line, if the variable is 1, than the function update_click_line will be called. These two functions are standing in the file update_line.js. The technical components used in this file are, d3v4, d3 tooltip.
- Bargraph: The bargraph also had an container of 6, because next to it is a text which tells a little story. The bargraph opens a file in d3, like the rest of the files/functions. by opening the file, the making of the bargarph starts. The bargraph is made in the file make_bargraph.js. By hoovering over the bars the user will see information about the data which is displayed.

###Challenges
- The data construction was a big challenge for me. I thought it were easy like with dataprocessing, but if you want to merge certain files which only match till a certain point it was much harder for me. I also saw that you have to look very carefully at your data and do not assume anything about it that is not there. I had to make changes in the years which I wanted to display. First I wanted to display 1980-2012, but certain files had only 1990-2016 with gaps in it of five years mostly. So I chose to display and use data from 1990-2010 so that the heatmap would show per year and the scatter per 5 years.
- I also made changes in the view of my visualisations. Sascha recommended me of showing my map and scatter next to each other and the linegraph, wich is updated by the two, underneath it. This was a really good suggestion and directly changed the lay out of my visualisations.
- Had problems with my local host, but with help from a classmate it was solved.
- Making of the worldmap was a big challenge, I left it for the last. Because I did not understand how it worked, maybe because I doubted to much to use de datamaps which was recommended by the student teachers or to use an other one which was recommended by fellow classmates. Endly, desided for the d3 v3 datamaps, which was a good decision because it contained an automatic update function.
- Had much problems to automatic deleting not matching countries, so i decided to do this by hand, because it were just 4/5 countries. Because of these not matching countries I had problems with my scatter too. Thise was because the data was NaN, but only because of three values. Now I know if there is such an error to check directly for the data and missing data to certrain objects.
- With the making of my linegraph I had problems with finding a good example, but eventually found a good one and this was easy from that moment on.
- Had much problems with the decalred general variables. I know now that if you declare a variable general it will be general for all files. This was a problem two times with my scatter_update and line_update.
- Biggest challenge I think is for me to google in the right way to find the right answers.


###Decisions
- The decision to adjust my visualisations layout by recommendation of sascha was a really good decision. This is because it was much clearer for the user.
- Many decisions were made on basis of the data, so i have to look much better at my data before starting a new project. The decisions I made here were necessary, because I wanted to work with that data. In the future I would look much more carfull at my data. Probably made the same decision in the future.
- Also made the decision to change the stacked bargraph into a bargraph, because of the data again.
- Overall I made everything what I had in mind, so the proposal was quite good. In the future I would make a more extended proposal, so i can not be surprised and also look much closer at my data. That was my biggest error and I underestimated this very much.
